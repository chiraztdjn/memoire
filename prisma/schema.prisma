generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Medicine {
  id              String      @id
  name            String?
  scientific_name String?
  details         String[]
  type            String?
  price           Float?
  img             String?
  orderItems      OrderItem[]
}

enum States {
  PENDING
  CANCELLED
  CONFIRMED
}

model Order {
  id           String      @id @default(uuid())
  state        States      @default(PENDING)
  orderItems   OrderItem[]
  user         User        @relation(fields: [userId], references: [id])
  userId       String
  Pharmacien   Pharmacien? @relation(fields: [pharmacienId], references: [id])
  pharmacienId String?
}

model OrderItem {
  id         String   @id @default(uuid())
  quantity   Int
  order      Order    @relation(fields: [orderId], references: [id])
  orderId    String
  medicine   Medicine @relation(fields: [medicineId], references: [id])
  medicineId String
}

model Pharmacien {
  id       String  @id @default(uuid())
  name     String?
  adress   String?
  email    String? @unique
  password String?
  orders   Order[]
}

model User {
  id        String  @id @default(uuid())
  name      String?
  last_name String?
  email     String? @unique
  password  String?
  phone     String?
  age       String?
  gender    String?
  adress    String?
  Order     Order[]
}
